'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.isActivity=exports.isTheme=exports.isBundle=exports.isPlugin=exports.filterObject=exports.firstUpperCase=exports.isEmptyObject=exports.isArray=exports.fsExistsSync=exports.searchIgnoreDirs=exports.searchDirs=exports.searchEntries=undefined;var _glob=require('glob');var _glob2=_interopRequireDefault(_glob);var _fs=require('fs');var _fs2=_interopRequireDefault(_fs);var _path=require('path');var _path2=_interopRequireDefault(_path);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var searchEntries=function searchEntries(options){var files={};// 如果目录以'/'结尾，则去掉
options.entryPath=options.entryPath.replace(/\/$/,'');/**
   * fileNamePrefix 表示输出文件的前缀
   * 如输出'app/js/default/index.js',则前缀为'app/js/default/'
   */var pattern='';if(options.fileType=='less'){pattern=options.entryPath+'/'+options.fileName+'*.less';}else if(options.isFuzzy){pattern=options.entryPath+'/**/'+options.fileName+'.{js,jsx}';}else{pattern=options.entryPath+'/'+options.fileName+'.{js,jsx}';}_glob2.default.sync(pattern).forEach(function(file){var entryName=options.fileNamePrefix+file.replace(options.entryPath+'/','').replace(file.substring(file.lastIndexOf('.')),'');files[entryName]=file;});return files;};// 判断文件或文件夹是否存在
var fsExistsSync=function fsExistsSync(path){try{_fs2.default.accessSync(path,_fs2.default.F_OK);}catch(e){return false;}return true;};var searchDirs=function searchDirs(searchDir,isExistDir){var dirsArr=[];if(!fsExistsSync(searchDir)){return[];}var dirs=_fs2.default.readdirSync(searchDir);dirs=dirs.filter(function(dir){return dir!=='.DS_Store'&&dir!=='.gitkeep'&&fsExistsSync(searchDir+'/'+dir+'/'+isExistDir);});dirsArr=dirs.map(function(dir){return searchDir+'/'+dir;});return dirsArr;};// 需要忽略的目录
var searchIgnoreDirs=function searchIgnoreDirs(searchDir,watchDirs){var dirsArr=[];if(!fsExistsSync(searchDir)){return[];};var dirs=_fs2.default.readdirSync(searchDir);dirs=dirs.filter(function(dir){return dir!=='.DS_Store'&&dir!=='.gitkeep'&&watchDirs.indexOf(dir)===-1;});dirsArr=dirs.map(function(dir){return searchDir+'/'+dir;});return dirsArr;};var isArray=function isArray(arr){return Object.prototype.toString.call(arr)==='[object Array]';};var isEmptyObject=function isEmptyObject(obj){for(var item in obj){return false;}return true;};var firstUpperCase=function firstUpperCase(str){return str.toLowerCase().replace(/( |^)[a-z]/g,function(L){return L.toUpperCase();});};var filterObject=function filterObject(obj,filterName){var newObj={};var filterObj={};var filterArr=filterName.split(',');for(var item in obj){if(filterArr.indexOf(item)===-1){newObj[item]=obj[item];}else{filterObj[item]=obj[item];}}return{newObj:newObj,filterObj:filterObj};};var isPlugin=function isPlugin(path){return path.indexOf('Plugin')!==-1;};var isBundle=function isBundle(path){return path.indexOf('Bundle')!==-1;};var isTheme=function isTheme(path){var finalPath=path.split(sep).join('/');return finalPath.indexOf('web/themes')!==-1;};var isActivity=function isActivity(path){return path.indexOf('activities')!==-1;};exports.searchEntries=searchEntries;exports.searchDirs=searchDirs;exports.searchIgnoreDirs=searchIgnoreDirs;exports.fsExistsSync=fsExistsSync;exports.isArray=isArray;exports.isEmptyObject=isEmptyObject;exports.firstUpperCase=firstUpperCase;exports.filterObject=filterObject;exports.isPlugin=isPlugin;exports.isBundle=isBundle;exports.isTheme=isTheme;exports.isActivity=isActivity;